
{% extends 'base.html' %}

{% block head %}
    {{ super() }}
    <!-- Custom CSS to mimic Tailwind styles for offline support -->
    <style>
        /* General body styling - often defined in base.html or a main CSS file */
        body {
            font-family: 'Inter', sans-serif; /* Ensuring Inter font is applied */
            background-color: #f4f7f6; /* Equivalent to bg-gray-50 or bg-gray-100/200-ish; picked a common light background */
        }

        /* Styles for the main container */
        .container {
            max-width: 448px; /* max-w-md: 28rem */
            margin-left: auto; /* mx-auto */
            margin-right: auto; /* mx-auto */
            padding: 1.5rem; /* p-6 */
            background-color: #ffffff; /* bg-white */
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); /* shadow-md */
            margin-top: 2.5rem; /* mt-10 */
        }

        /* Styles for the main heading */
        h2 {
            font-size: 1.875rem; /* text-3xl */
            line-height: 2.25rem; /* text-3xl */
            font-weight: 700; /* font-bold */
            color: #1f2937; /* text-gray-800 */
            margin-bottom: 1.5rem; /* mb-6 */
            text-align: center; /* text-center */
        }

        /* Styles for flash messages (alerts) */
        .alert {
            padding: 0.75rem; /* p-3 */
            margin-bottom: 0.75rem; /* mb-3 */
            font-size: 0.875rem; /* text-sm */
            line-height: 1.25rem; /* text-sm */
            border-radius: 0.5rem; /* rounded-lg */
            display: flex; /* flex */
            align-items: center; /* items-center */
            border: 1px solid transparent; /* default border */
        }
        .alert-success {
            background-color: #d1fae5; /* bg-green-100 */
            color: #065f46; /* text-green-800 */
            border-color: #a7f3d0; /* a slightly darker green border */
        }
        .alert-danger {
            background-color: #fee2e2; /* bg-red-100 */
            color: #991b1b; /* text-red-800 */
            border-color: #fca5a5; /* a slightly darker red border */
        }
        .alert-info { /* Assuming blue alerts map to info */
            background-color: #dbeafe; /* bg-blue-100 */
            color: #1e40af; /* text-blue-800 */
            border-color: #93c5fd; /* a slightly darker blue border */
        }
        .alert i {
            margin-right: 0.5rem; /* alert i (for icon spacing) */
        }

        /* Form spacing (mimicking space-y-4) */
        .space-y-4 > *:not(:first-child) {
            margin-top: 1rem; /* space-y-4 */
        }

        /* Label styles */
        label {
            display: block; /* block */
            font-size: 0.875rem; /* text-sm */
            font-weight: 500; /* font-medium */
            color: #374151; /* text-gray-700 */
        }

        /* Select/Input field styles */
        select {
            margin-top: 0.25rem; /* mt-1 */
            display: block; /* block */
            width: 100%; /* w-full */
            border-radius: 0.375rem; /* rounded-md */
            border: 1px solid #d1d5db; /* border-gray-300 */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
            padding-top: 0.5rem; /* py-2 */
            padding-bottom: 0.5rem; /* py-2 */
            padding-left: 0.75rem; /* px-3 */
            padding-right: 0.75rem; /* px-3 */
            /* Focus styles */
            outline: none; /* focus:outline-none */
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        select:focus {
            border-color: #6366f1; /* focus:border-indigo-500 */
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.5); /* simplified focus:ring-indigo-500 */
        }


        /* Button styles */
        button[type="submit"] {
            width: 100%; /* w-full */
            display: flex; /* flex */
            justify-content: center; /* justify-center */
            padding: 0.5rem 1rem; /* py-2 px-4 */
            border: 1px solid transparent; /* border border-transparent */
            border-radius: 0.375rem; /* rounded-md */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
            font-size: 0.875rem; /* text-sm */
            line-height: 1.25rem; /* text-sm */
            font-weight: 500; /* font-medium */
            color: #ffffff; /* text-white */
            background-color: #2563eb; /* bg-blue-600 */
            cursor: pointer;
            transition: background-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        button[type="submit"]:hover {
            background-color: #1d4ed8; /* hover:bg-blue-700 */
        }
        button[type="submit"]:focus {
            outline: 2px solid transparent; /* focus:outline-none */
            outline-offset: 2px;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.5); /* simplified focus:ring-blue-500 */
        }

        /* Text center alignment */
        .text-center {
            text-align: center;
        }

        /* Generic text styles (for paragraph/link) */
        p.text-gray-600, a.text-gray-600 {
            color: #4b5563; /* text-gray-600 */
        }

        /* Margin top for the logout link container */
        .mt-6 {
            margin-top: 1.5rem; /* mt-6 */
        }

        /* Logout link hover effect */
        a.text-gray-600:hover {
            color: #111827; /* hover:text-gray-900 */
        }
    </style>
{% endblock %}

{% block content %}
<div class="container mx-auto p-6 bg-white rounded-lg shadow-md max-w-md mt-10">
    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Select Your Business</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="mb-4">
                {% for category, message in messages %}
                    <div class="p-3 mb-3 text-sm {% if category == 'success' %}bg-green-100 text-green-800{% elif category == 'danger' %}bg-red-100 text-red-800{% else %}bg-blue-100 text-blue-800{% endif %} rounded-lg alert alert-{{ category }}" role="alert">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    {% if businesses %}
    <form method="POST" action="{{ url_for('business_selection') }}" class="space-y-4">
        <div>
            <label for="business_id" class="block text-sm font-medium text-gray-700">Choose a Business:</label>
            <select id="business_id" name="business_id" required
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm py-2 px-3 focus:border-indigo-500 focus:ring-indigo-500">
                <option value="">-- Select a Business --</option>
                {% for business in businesses %}
                    <option value="{{ business.id }}">{{ business.name }} ({{ business.type }} - {{ business.location }})</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
            Proceed to Dashboard
        </button>
    </form>
    {% else %}
    <p class="text-center text-gray-600">No businesses found for your account. Please contact an administrator.</p>
    {% endif %}

    <div class="mt-6 text-center">
        <a href="{{ url_for('logout') }}" class="text-sm text-gray-600 hover:text-gray-900">Logout</a>
    </div>
</div>
{% endblock %}
